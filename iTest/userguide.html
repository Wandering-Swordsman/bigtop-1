<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Apr 7, 2011 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>iTest - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20110407" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                  <a href="" id="bannerLeft">
                                                <img src="images/itest.png" alt="iTest" />
                </a>
                          <div id="bannerRight">
                                                <img src="images/banner.png" alt="iTest" />
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2011-04-07</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="http://www.apache.org/" class="externalLink" title="Apache">Apache</a>
            |
                        <a href="http://github.com/cloudera/iTest" class="externalLink" title="iTest 1.0">iTest 1.0</a>
              
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>iTest</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Welcome">Welcome</a>
            </li>
                  <li class="none">
                          <a href="license.html" title="License">License</a>
            </li>
          </ul>
                       <h5>About iTest</h5>
                  <ul>
                  <li class="none">
                          <a href="itest.html" title="iTest">iTest</a>
            </li>
                  <li class="none">
                          <a href="devguide.html" title="Contributing">Contributing</a>
            </li>
                  <li class="none">
                          <a href="source-repository.html" title="Sources">Sources</a>
            </li>
                  <li class="none">
                          <a href="apidocs/index.html" title="API docs">API docs</a>
            </li>
                  <li class="none">
                          <a href="issue-tracking.html" title="Issues">Issues</a>
            </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="team-list.html" title="Team">Team</a>
            </li>
          </ul>
                       <h5>Using iTest</h5>
                  <ul>
                  <li class="none">
            <strong>User guide</strong>
          </li>
                  <li class="none">
                          <a href="examples.html" title="Examples">Examples</a>
            </li>
          </ul>
                       <h5>Getting iTest</h5>
                  <ul>
                  <li class="none">
                          <a href="downloads.html#binary" title="Binary">Binary</a>
            </li>
                  <li class="none">
                          <a href="downloads.html#sources" title="Sources">Sources</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Develop with iTest<a name="Develop_with_iTest"></a></h2><!-- ~~~~~~~~~~~~~~~~ --><div class="section"><h3>iTest provided functionality<a name="iTest_provided_functionality"></a></h3><div class="section"><h4>Shell support<a name="Shell_support"></a></h4><p>iTest implements transparent shell-outs from test written in Java and Groovy. This support is implemented in <tt>org.apache.itest.shell</tt> package.</p><div class="source"><pre>...
  Shell sh = new Shell(&quot;/bin/bash -s&quot;);
  sh.exec(&quot;hadoop jar $HADOOP_HOME/hadoop-examples.jar sleep -mt 1 -rt 1 -m 10 -r 10&quot;);
  assertTrue (&quot;Non-zero return code&quot;, sh.ret == 0);
...</pre></div><p>Of cource the same can be done using pure Java (Groovy) code</p><div class="source"><pre>...
  Configuration conf = new Configuration();
  SleepJob sljob = new SleepJob();
  sljob.setConf(conf);
  conf = sljob.setupJobConf(10, 10, 100, 100, 100, 100);
  RunningJob rJob = JobClient.runJob(conf);
...</pre></div></div><div class="section"><h4>Package management<a name="Package_management"></a></h4><p>In order to manipulate native packages (e.g. for the purpose of testing their behavior) iTest provides high-level packaging abstraction with concrete implementations for .deb, .rpm, packages. More is in the pipeline.</p><p>A typical use of packaged software involves installing/updating/removing packages; manipulating statuses of the services, etc. Here how this can be done with iTest:</p><div class="source"><pre>  static public PackageManager pm = PackageManager.getPackageManager();
...
  PackageInstance pkg = PackageInstance.getPackageInstance(pm, &quot;hadoop-0.20&quot;);
  pm.install(pkg);</pre></div><p>This code snippet takes care about getting an instance of the host OS' package manager, creating an instance of &quot;hadoop-0.20&quot; package, and instructing management layer to install said package.</p><p>Because package management is implemented on top of JVM platform one can easily run the following scenario of package testing:</p><ul><li>install package</li><li>run existing system tests</li><li>check results</li><li>remove the package</li></ul><p>iTest's package management subsystem also allows certain manipulations with repositories for apt-get, yum, and zypper.</p></div><div class="section"><h4>Jar helpers<a name="Jar_helpers"></a></h4><p>These helpers are a special kind of functionality to facilitate test execution contained in appopriate artifacts.</p><p>A typical use case is to unpack a data which has been archived along with the test code from within the test itself. Normally this might be non-so-easy task. Not so with iTest help.</p><div class="source"><pre>  JarContent.unpackJarContainer(MyTestClass.class, '.', DATA_DIR);</pre></div><p>The above static call will look in the classpath for the jar containing MyTestClass class file and unpack everything matching the pattern ('.' everything in this case) to the specified destination DATA_DIR.</p><p>Other manipulations are enabled. Please refer to project's documentation for more information about current framework APIs.</p></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                   2011.
          All Rights Reserved.      
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
