<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Apr 7, 2011 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>iTest - </title>
    <style type="text/css" media="all">
      @import url("./css/maven-base.css");
      @import url("./css/maven-theme.css");
      @import url("./css/site.css");
    </style>
    <link rel="stylesheet" href="./css/print.css" type="text/css" media="print" />
    <meta name="Date-Revision-yyyymmdd" content="20110407" />
    <meta http-equiv="Content-Language" content="en" />
        
  </head>
  <body class="composite">
    <div id="banner">
                  <a href="" id="bannerLeft">
                                                <img src="images/itest.png" alt="iTest" />
                </a>
                          <div id="bannerRight">
                                                <img src="images/banner.png" alt="iTest" />
                </div>
            <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
        
                <div class="xleft">
        <span id="publishDate">Last Published: 2011-04-07</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
                      </div>
            <div class="xright">                    <a href="http://www.apache.org/" class="externalLink" title="Apache">Apache</a>
            |
                        <a href="http://github.com/cloudera/iTest" class="externalLink" title="iTest 1.0">iTest 1.0</a>
              
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
        
                                <h5>iTest</h5>
                  <ul>
                  <li class="none">
                          <a href="index.html" title="Welcome">Welcome</a>
            </li>
                  <li class="none">
                          <a href="license.html" title="License">License</a>
            </li>
          </ul>
                       <h5>About iTest</h5>
                  <ul>
                  <li class="none">
                          <a href="itest.html" title="iTest">iTest</a>
            </li>
                  <li class="none">
                          <a href="devguide.html" title="Contributing">Contributing</a>
            </li>
                  <li class="none">
                          <a href="source-repository.html" title="Sources">Sources</a>
            </li>
                  <li class="none">
                          <a href="apidocs/index.html" title="API docs">API docs</a>
            </li>
                  <li class="none">
                          <a href="issue-tracking.html" title="Issues">Issues</a>
            </li>
                  <li class="none">
                          <a href="faq.html" title="FAQ">FAQ</a>
            </li>
                  <li class="none">
                          <a href="team-list.html" title="Team">Team</a>
            </li>
          </ul>
                       <h5>Using iTest</h5>
                  <ul>
                  <li class="none">
                          <a href="userguide.html" title="User guide">User guide</a>
            </li>
                  <li class="none">
            <strong>Examples</strong>
          </li>
          </ul>
                       <h5>Getting iTest</h5>
                  <ul>
                  <li class="none">
                          <a href="downloads.html#binary" title="Binary">Binary</a>
            </li>
                  <li class="none">
                          <a href="downloads.html#sources" title="Sources">Sources</a>
            </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                   
        
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Examples<a name="Examples"></a></h2><!-- ~~~~~~ --><div class="section"><h3>Interface<a name="Interface"></a></h3><p>Test execution is done via simple maven CLI:</p><div class="source"><pre>mvn verify</pre></div></div><div class="section"><h3>A typical use case for iTest.<a name="A_typical_use_case_for_iTest."></a></h3><p>When integration/system tests are getting executed in iTest environment the following two pieces need to be present:</p><div class="section"><h4>a test artifact:<a name="a_test_artifact:"></a></h4><p>a self-contained archive (such as jar file available via Maven) includes test code (compiled Java classes, helper scripts, test data, golden files)</p><p>Typically, Maven artifact has a manifest which declares the artifact group, name, and version. Using this triplet an artifact can be identified for use in upstream projects.</p><p>Test artifact is typically coming as a by-product of a software component's build. E.g. Apache Pig project produces a test artifact called pigsmoke-0.9.0-SNAPSHOT (as in <a class="externalLink" href="http://repository.apache.org/snapshots/org/apache/pig/pigsmoke/0.9.0-SNAPSHOT/">this location</a>) can be used for testing Pig component of Hadoop ecosystem.</p></div><div class="section"><h4>starter project (test suite)<a name="starter_project_test_suite"></a></h4><p>this is (typically) a maven pom file which declares required dependencies on test artifact(s) and defines additional optional steps to prepare environment where the test scenarios will be executed.</p><p>In the particular example of Pig's smoke tests artifact, the starter has to declare dependency to it</p><div class="source"><pre>&lt;dependency&gt;
  &lt;groupId&gt;org.apache.pig&lt;/groupId&gt;
  &lt;artifactId&gt;pigsmoke&lt;/artifactId&gt;
  &lt;version&gt;0.9.0-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</pre></div><p>Pig artifact needs to be there too:</p><div class="source"><pre>&lt;dependency&gt;
  &lt;groupId&gt;org.apache.pig&lt;/groupId&gt;
  &lt;artifactId&gt;pig&lt;/artifactId&gt;
  &lt;version&gt;0.9.0-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</pre></div><p>Also, Pig needs to have Hadoop client code available. Version of hadoop client jar really depends on the version of the cluster the tests are executed against:</p><div class="source"><pre>&lt;dependency&gt;
  &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;
  &lt;artifactId&gt;hadoop-core&lt;/artifactId&gt;
  &lt;version&gt;0.20.2-SNAPSHOT&lt;/version&gt;
&lt;/dependency&gt;</pre></div></div></div><div class="section"><h3>Putting it all together<a name="Putting_it_all_together"></a></h3><p>As you can see in the <a class="externalLink" href="https://github.com/cloudera/iTest/tree/master/examples">examples</a> we are using Maven failsafe plugin to execute tests in the integration testing phase of a maven project lifecycle.</p><p>One of the issues with this plugin is that it requires a presence of a physical files somewhere on the disk in order to run appropriate tests (which might be included to the classpath from jar files). To avoid having same class files included from jar files and from disk files iTest allows to 'touch' test class files in the location where failsafe will be looking for them, however ones from jars found in the classpath will be executed.</p><p>You can see this step being done in the toplevel <a class="externalLink" href="https://github.com/cloudera/iTest/blob/master/examples/pom.xml">pom.xml</a> file in the configuration section of <tt>org.codehaus.groovy.maven</tt> plugin</p><p>iTest provides a convenient method of unpacking data files included into test artifacts (if needed). It is can be done from the code of the tests or from the project pom file (look for &quot;unpack&quot; goal in the example above).</p></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">Copyright &#169;                   2011.
          All Rights Reserved.      
        
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
